\documentclass[12pt]{article}

%\usepackage[subpreambles=true]{standalone}
%\usepackage{import}

\textwidth 16.5cm \oddsidemargin -0.5cm \topmargin -2cm \textheight
23cm \footskip 1cm \usepackage{epsfig}
\usepackage{amsmath,graphicx,psfrag,pstricks,float}
\usepackage{amsfonts}
\usepackage{subfig}
\usepackage{booktabs}
%\usepackage{multirow}
%\usepackage{multicol}

\usepackage{algorithm}
\usepackage{algorithmic}

\usepackage{titlesec}
\titlespacing\section{0pt}{8pt plus 2pt minus 2pt}{1pt plus 2pt minus 2pt}
\titlespacing\subsection{0pt}{10pt plus 2pt minus 2pt}{1pt plus 2pt minus 2pt}

\usepackage{parskip}

\def\n{\noindent}
\def\u{\underline}
\def\hs{\hspace}
\def\nt{\notag}
\newcommand{\thrfor}{.^{\displaystyle .} .}
\newcommand{\bvec}[1]{{\bf #1}}

%--------------------- Formatting options -----------------------------%
\linespread{1.3}   % 1.5 line spacing
\renewcommand{\arraystretch}{1.2} % More space between rows in an array
\usepackage{xcolor}

\newcommand{\tofix}[1]{
    \textcolor{red}{#1}
}

\newcommand{\ToFix}[1]{
    \begingroup\color{red}#1 \endgroup
}

\newcommand{\OptionOne}[1]{
    \begingroup\color{green} 
        \emph{Option 1:} 
        #1 
    \endgroup
}

\newcommand{\OptionTwo}[1]{
     \begingroup\color{blue} 
        \emph{Option 2:} 
        #1 
    \endgroup
}

\newcommand{\asd}{$\alpha$-stable distribution }

\newcommand{\vt}{y_k - \bvec{CA\mu}_{k-1}^{(i)}}

\newcommand{\SAhalf}{S_{\alpha/2}}

%--------------------- Math Commands for Distributions -------------%
\newcommand\iid{i.i.d.}
\newcommand{\Gaussian}{\mathcal{N}}
\renewcommand{\vec}[1]{{\bf #1}}
%\renewcommand*{\v}[1]{\mathbf{#1}}   % Short for "vector"

%--------------------- Bibliography ---------------------------------%
\usepackage[
    sorting=none
]{biblatex}
\addbibresource{bib.bib}

%%% Default start and end for each subfile
\AtBeginDocument{%
}

\AtEndDocument{%
	\printbibliography
	\listoffigures
	\listoftables
	\newpage
%	\printacronyms[include-classes=abbrev,name=Acronyms]
}

%-------------------- Selective Compilation Booleans ----------------%
\usepackage{ifthen}
\input{selective_compilation_booleans}



% ------------------- Multiple Files packages / commands -----------%
% \usepackage{xr}

% \makeatletter
% \newcommand*{\addFileDependency}[1]{% argument=file name and extension
%   \typeout{(#1)}
%   \@addtofilelist{#1}
%   \IfFileExists{#1}{}{\typeout{No file #1.}}
% }
% \makeatother

% \newcommand*{\myexternaldocument}[1]{%
%     \externaldocument{#1}%
%     \addFileDependency{#1.tex}%
%     \addFileDependency{#1.aux}%
% }
\usepackage{hyperref}
% \usepackage{refcheck}
\usepackage{subfiles} % Best loaded last in the preamble



\title{Simulation and Inference in Limit Order Books}
\author{Choon Kiat Lee}
\date{ }


\begin{document}
\noindent

\maketitle

\tableofcontents

% Selective Compilation Flags %

 \setboolean{display1}{true}

 \setboolean{display2_1}{true}
\setboolean{display2_1_1}{true}
\setboolean{display2_2_2}{true}
\setboolean{display2_2_3}{true}
\setboolean{display2_2_4}{true}
\setboolean{display2_2_5}{true}

\setboolean{display3_1_1}{true}

\setboolean{display3_2_1}{true}


\setboolean{display3_2_1}{true}
\setboolean{display3_2_2}{true}
\setboolean{display3_2_3}{true}
\setboolean{display3_2_4}{true}

\setboolean{display3_4_1}{true}
%\setboolean{display3_5_1}{true}

\setboolean{display4_1_1}{true}
\setboolean{display4_1_2}{true}
%\setboolean{display4_1_1}{true}


%\import{sections/}{1--introduction}

\section{Introduction}
\ifthenelse{\boolean{display1}}{\subfile{sections/1--introduction}}{}

\section{Theory}

    \subsection{Modelling} \label{sec:modelling}
    \ifthenelse{\boolean{display2_1}}{\subfile{sections/2--1--modelling}}{}
    
    \subsection{Notes on the tail approximations for alpha stable distribution} \label{sec:tail_approx}
    \ifthenelse{\boolean{display2_1_1}}{\subfile{sections/2--1--1--tail-approx}}{}
    
    \subsection{Inference} \label{sec:inference}
    
    \subsubsection{Generic Bootstrap Particle Filter} \label{sec:generic_bootstrap_pf}
    \ifthenelse{\boolean{display2_2_1}}{\subfile{sections/2--2--1--generic-bootstrap-particle-filter}}{}
%    \ifthenelse{\boolean{display2_2_1}}{\subfile{sections/2--2--1--simple-particle-filter}}{}

	\subsubsection{Drift-Corrected Bootstrap Particle Filter} \label{sec:drift_corrected_pf}
	\ifthenelse{\boolean{display2_2_2}}{\subfile{sections/2--2--2--drift-corrected-pf}}{}
    
    \subsubsection{Generic Rao-Blackwellised Particle Filter (RBPF)} \label{sec:generic_RBPF}
    \ifthenelse{\boolean{display2_2_3}}{\subfile{sections/2--2--2--RBPF}}{}
    
    \subsubsection{Dense Sampling Rao-Blackwellised Particle Filter (RBPF)} \label{sec:dense_sampling_RBPF}
    \ifthenelse{\boolean{display2_2_4}}{\subfile{sections/2--2--4--dense-sampling-rbpf}}{}
    
    \subsubsection{Adaptive Sampling Rao-Blackwellised Particle Filter (RBPF)} \label{sec:adaptive_sampling_RBPF}
    \ifthenelse{\boolean{display2_2_5}}{\subfile{sections/2--2--5--adaptive-sampling-rbpf}}{}
    
%    \subsubsection{Sequential Markov Chain Monte Carlo (SMCMC)}
    
%    \subsection{Parameter Estimation}

\section{Experimental Design}

	\subsection{Simulated Data} \label{sec:experimental_simulated}
	\ifthenelse{\boolean{display3_1_1}}{\subfile{sections/3--1--1--Simulated_data}}{}
	
	\subsection{Performance Metrics}\label{sec:experimental_performance}
	\ifthenelse{\boolean{display3_2_1}}{\subfile{sections/3--2--1--Performance Metrics}}{}
	
	
	\subsection{Hyperparameter selection} \label{sec:experimental_hyperparameter}

	
	\subsection{Trading Algorithm}
	
	
	
	
	

\section{Experimental Results and Discussion}

    \subsection{Comparison of inference algorithms} \label{sec:results_comparison}
    
    \ifthenelse{\boolean{display4_1_1}}{\subfile{sections/4--1--inference-comparison}}{}
    
    	\subsubsection{Boostrap Particle Filters} \label{sec:results_drift_corrected}
    	\ifthenelse{\boolean{display4_1_1}}{\subfile{sections/4--1--1--Drift-corrected-particle-filter}}{}
    	
    	\subsection{Rao-Blackwellised Particle Filters} \label{sec:results_rbpf}
    	\ifthenelse{\boolean{display4_1_2}}{\subfile{sections/4--1--2--RBPF}}{}
    
    \subsection{Parameter Estimation}
    
    \subsection{Computational Costs}
%   	\ifthenelse{\boolean{display4_3_1}}{\subfile{sections/4--3--1--computational-costs}}{}
  
    
    \subsection{Exploration of High Frequency Financial Timeseries}
    
    \ifthenelse{\boolean{display3_4_1}}{\subfile{sections/3--4--1--HF_exploration}}{}
    
    \subsection{Trading Simulations}
    
    \ifthenelse{\boolean{display3_5_1}}{\subfile{sections/3--5--1--Trading}}{}


\section{Discussion}

    \subsection{Efficiency}
    \subsection{Timescales}
    \subsection{Computational Costs}

\section{Conclusion}

	\printbibliography[title={References},heading=bibnumbered]
\end{document}














% \section{ Useful Snippets }

% \subsection{Figures}

% Single Figure

% \begin{figure}[h!]
%     \centering
%     \includegraphics[width=10.0cm]{1_fig.png}
%     \caption{Gaussian Process Predictive Distribution with @covSEiso}
%     \label{fig:1_fig}
% \end{figure}

% \newpage

% Multiple Figure Thing

% \begin{figure}[h!]
%     \centering
%     \subfloat[QQ plot for 1st model\label{fig:2_qq_covSEiso}]{
%     \includegraphics[height=4.5cm]{3_qq_covSEiso.png}}
%     \qquad
%     \subfloat[QQ plot for 2nd model\label{fig:2_qq_local_minima}]{\includegraphics[height=4.5cm]{2_qq_local_minima.png}}
%     \caption{QQ plots of residuals of both local minima of the @covSEiso models}
%     \label{fig:2_qq_plots}
% \end{figure}


% \subsection{Tables}

% Simple Table

% \begin{table}[h!]
% \centering
% \begin{tabular}[width=\linewidth]{ c|ccc } 
%     \toprule
% 	%\hline
% 	 & Initial & Optimised & Intuitive Explanation   \\ 
% 	\hline
% 	$\theta_1$ & $e^{-1}$ & 0.128 & Characteristic Length Scale \\ 
% 	$\theta_2$ & 1 & 0.897 & Signal Std. Dev. \\
% 	$ p(\bf{y}|\bf{x})$ & - & $6.80 \times 10^{-6}$ & Probability of Training data\\
% 	%\hline
% 	\bottomrule
% \end{tabular}
% \caption{Final optimised covariance hyperparameters}
% \label{table: 1_hyperparams}
% \end{table}

% \subsection{Equations}

% Simple Equation with label

% \begin{equation}
%     \label{eqn:covSEiso}
%     k(\bf{x},\bf{x'}) = \theta_2^2 e^{-(\bf{x}-\bf{x'})^T (\theta_1^2\bf{I})^{-1} (\bf{x}-\bf{x'})} 
% \end{equation}

% Equation Array

% \begin{eqnarray}
%     k(x,x_*) & = & \theta_3^2 exp(\frac{-2sin^2(\pi (x-x_*))/\theta_2}{\theta_1^2})
%     \times 
%     \theta_5^2 exp(\frac{-(x-x_*)^2}{2\theta_4^2}) \notag \\
%     & = & A(x,x_*) \times exp(\frac{-2sin^2(\pi (x-x_*))/\theta_2}{\theta_1^2})
%     \label{eqn:periodic_product}
% \end{eqnarray}

% \subsection{Code}

% \begin{lstlisting}[frame=single]  
% meanfunc = []; covfunc = @covSEiso; likfunc = @likGauss;
% hyp = struct('mean', [], 'cov', [-1 0], 'lik', 0);
% hyp2 = minimize(hyp, @gp, -100, @infGaussLik, meanfunc, covfunc, likfunc, x, y);
% [mu s2] = gp(hyp2, @infGaussLik, meanfunc, covfunc, likfunc, x, y, xs);
% \end{lstlisting}